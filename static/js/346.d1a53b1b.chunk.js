(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[346],{1346:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var r="ContactsView_contactscVies__pEVSb",a="ContactsView_item__Aff2J",s="ContactsView_contactsTitle__+M+J9",o=n(1413),c=n(885),i=n(2791),u=n(1134),l=n(6429),d=n.n(l),f=n(4317),h=n(4386),m=n(9782),p=n(5264),v={nameRegex:/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,phoneRegExp:/^((\\+[1-9]{1,4}[ \\-]*)|[(\+\(\))]|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/},x=n(3027),g=n(3360),b="ContactForm_contactForm__FkOKX",j=n(184),N=function(){var e=(0,i.useState)(!0),t=(0,c.Z)(e,2),n=t[0],r=t[1],a=(0,m.wY)(),s=a.data,l=(a.refetch,(0,m.Lr)()),N=(0,c.Z)(l,2),y=N[0],Z=N[1],w=Z.isLoading,C=Z.isSuccess,_=(0,i.useState)({name:"",number:""}),E=(0,c.Z)(_,2),L=E[0],I=(E[1],h.Ry().shape({name:h.Z_().required("Name is required").min(6,"Name must be at least 6 characters").max(20,"Name must not exceed 20 characters").matches(v.nameRegex,"Name is not valid its should contain only alphabet letters"),number:h.Z_().matches(v.phoneRegExp,"Phone number is not valid its should contain only numbers")})),V=(0,u.cI)({mode:"onTouched",reValidateMode:"onChange",defaultValues:L,resolver:(0,f.X)(I)}),k=V.register,R=V.resetField,S=V.handleSubmit,M=V.formState.errors;return(0,j.jsx)("div",{className:b,children:(0,j.jsxs)(x.Z,{onSubmit:S((function(e,t){t.preventDefault();var n=e.name,r=e.number;t.preventDefault();var a={id:d().generate(),name:n,number:r};C&&(p.Notify.success("Contact ".concat(e.name," added successfully")),R("name"),R("number")),y(a)}),(function(e){console.log("ERROR:::",e)})),children:[(0,j.jsxs)(x.Z.Group,{className:"mb-3",controlId:"formBasicTextName",onChange:function(e){!function(e){var t=e.currentTarget.childNodes[1].value;if(s.find((function(e){return e.name.toLowerCase()===t.toLowerCase().replace(/ +/g," ").trim()})))return r(!0),p.Notify.warning("".concat(t," is already in contacts."));r(!1)}(e)},children:[(0,j.jsx)(x.Z.Label,{children:"Contact name"}),(0,j.jsx)(x.Z.Control,(0,o.Z)({type:"text",placeholder:"Enter contact name"},k("name"))),M.name&&(0,j.jsx)(x.Z.Text,{className:"text-danger",children:M.name.message})]}),(0,j.jsxs)(x.Z.Group,{className:"mb-3",controlId:"formBasicPhoneNumber",children:[(0,j.jsx)(x.Z.Label,{children:"Phone number"}),(0,j.jsx)(x.Z.Control,(0,o.Z)({type:"text",placeholder:"Enter contact phohe number"},k("number"))),M.number&&(0,j.jsx)(x.Z.Text,{className:"text-danger",children:M.number.message})]}),(0,j.jsx)(g.Z,{variant:"primary",type:"submit",disabled:n,children:w?(0,j.jsx)(j.Fragment,{children:"Adding..."}):(0,j.jsx)(j.Fragment,{children:"Add contact"})})]})})},y="Container_container__8322i",Z=n(1694),w=n.n(Z),C=function(e){var t=e.className,n=e.children,r=w()(y,t);return(0,j.jsx)("div",{className:r,children:n})},_={listItem:"ContactsList_listItem__Elj+5",info:"ContactsList_info__hjGaA"},E=n(5048),L=n(5987),I=(n(2391),n(239)),V=n(9004),k=n(162),R=n(9007),S=n(4787),M=n(8633),P=["bsPrefix","active","disabled","eventKey","className","variant","action","as"],z=i.forwardRef((function(e,t){var n=e.bsPrefix,r=e.active,a=e.disabled,s=e.eventKey,i=e.className,u=e.variant,l=e.action,d=e.as,f=(0,L.Z)(e,P);n=(0,k.vE)(n,"list-group-item");var h=(0,S.v)((0,o.Z)({key:(0,M.h)(s,f.href),active:r},f)),m=(0,c.Z)(h,2),p=m[0],v=m[1],x=(0,R.Z)((function(e){if(a)return e.preventDefault(),void e.stopPropagation();p.onClick(e)}));a&&void 0===f.tabIndex&&(f.tabIndex=-1,f["aria-disabled"]=!0);var g=d||(l?f.href?"a":"button":"div");return(0,j.jsx)(g,(0,o.Z)((0,o.Z)((0,o.Z)({ref:t},f),p),{},{onClick:x,className:w()(i,n,v.isActive&&"active",a&&"disabled",u&&"".concat(n,"-").concat(u),l&&"".concat(n,"-action"))}))}));z.displayName="ListGroupItem";var A=z,T=["className","bsPrefix","variant","horizontal","numbered","as"],F=i.forwardRef((function(e,t){var n,r=(0,I.Ch)(e,{activeKey:"onSelect"}),a=r.className,s=r.bsPrefix,c=r.variant,i=r.horizontal,u=r.numbered,l=r.as,d=void 0===l?"div":l,f=(0,L.Z)(r,T),h=(0,k.vE)(s,"list-group");return i&&(n=!0===i?"horizontal":"horizontal-".concat(i)),(0,j.jsx)(V.Z,(0,o.Z)((0,o.Z)({ref:t},f),{},{as:d,className:w()(a,h,c&&"".concat(h,"-").concat(c),n&&"".concat(h,"-").concat(n),u&&"".concat(h,"-numbered"))}))}));F.displayName="ListGroup";var D=Object.assign(F,{Item:A}),K=n(1538),G=function(){var e=(0,m.wY)(),t=e.data,n=e.isLoading,r=e.refetch,a=e.isSuccess,s=(0,m.Nt)(),o=(0,c.Z)(s,2),u=o[0],l=(o[1].isLoading,(0,E.v9)(K.zK).filter),d=(0,i.useState)(null),f=(0,c.Z)(d,2),h=f[0],v=f[1];(0,i.useEffect)((function(){r()}),[r]);(0,i.useEffect)((function(){}),[r]),(0,i.useEffect)((function(){a&&p.Notify.success("Contact deleted")}),[a]);var x=""===l?t:t.filter((function(e){return e.name.toLowerCase().includes(l.toLowerCase())})),b=(0,j.jsx)(D,{className:_.contactsList,children:t&&x.map((function(e){var t=e.name,n=e.id,r=e.number;return(0,j.jsxs)(D.Item,{className:_.listItem,id:n,children:[(0,j.jsxs)("div",{className:_.info,children:[(0,j.jsxs)("span",{className:_.contactName,children:[t,": "]}),(0,j.jsx)("span",{className:_.phoneNumber,children:r})]}),h===n?(0,j.jsx)(g.Z,{children:"Deleting..."}):(0,j.jsx)(g.Z,{variant:"primary",type:"button",onClick:function(e){return function(e,t){v(t),u(t)}(0,n)},children:"Delete contact"})]},n)}))});return n?(0,j.jsx)("div",{children:"loading..."}):0!==t.length?b:"You have no contacts"},O=function(){var e=(0,E.I0)(),t=(0,E.v9)(K.zK).filter;return(0,j.jsx)(x.Z,{children:(0,j.jsx)(x.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:(0,j.jsx)(x.Z.Control,{type:"text",placeholder:"Search...",value:t,onChange:function(t){return e((0,K.Tv)(t.currentTarget.value))}})})})},q=n(4867),U=n(9529),Y=function(){var e=(0,E.I0)();return(0,i.useEffect)((function(){e(q.r5.fetchCurrentUser()).unwrap().catch((function(){p.Notify.warning("Sorry, your authorization token expired, please relogin",{}),e(q.r5.logOut())}))}),[e]),(0,E.v9)(q.um.getIsFetchingCurrentUser)?(0,j.jsx)(U.Z,{}):(0,j.jsx)(C,{children:(0,j.jsxs)("ul",{className:r,children:[(0,j.jsxs)("li",{className:a,children:[(0,j.jsx)("h4",{className:s,children:"Add contacts info"}),(0,j.jsx)(N,{}),(0,j.jsx)("h4",{className:s,children:"Find contacts"}),(0,j.jsx)(O,{})]}),(0,j.jsxs)("li",{className:a,children:[(0,j.jsx)("h4",{className:s,children:"List of Contacts"}),(0,j.jsx)(G,{})]})]})})}},6429:function(e,t,n){"use strict";e.exports=n(5274)},8857:function(e,t,n){"use strict";var r,a,s,o=n(5408),c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function i(){s=!1}function u(e){if(e){if(e!==r){if(e.length!==c.length)throw new Error("Custom alphabet for shortid must be "+c.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,n){return t!==n.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+c.length+" unique characters. These characters were not unique: "+t.join(", "));r=e,i()}}else r!==c&&(r=c,i())}function l(){return s||(s=function(){r||u(c);for(var e,t=r.split(""),n=[],a=o.nextValue();t.length>0;)a=o.nextValue(),e=Math.floor(a*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}e.exports={get:function(){return r||c},characters:function(e){return u(e),r},seed:function(e){o.seed(e),a!==e&&(i(),a=e)},lookup:function(e){return l()[e]},shuffled:l}},7098:function(e,t,n){"use strict";var r,a,s=n(2226);n(8857);e.exports=function(e){var t="",n=Math.floor(.001*(Date.now()-1567752802062));return n===a?r++:(r=0,a=n),t+=s(7),t+=s(e),r>0&&(t+=s(r)),t+=s(n)}},2226:function(e,t,n){"use strict";var r=n(8857),a=n(9139),s=n(2483);e.exports=function(e){for(var t,n=0,o="";!t;)o+=s(a,r.get(),1),t=e<Math.pow(16,n+1),n++;return o}},5274:function(e,t,n){"use strict";var r=n(8857),a=n(7098),s=n(6046),o=n(5347)||0;function c(){return a(o)}e.exports=c,e.exports.generate=c,e.exports.seed=function(t){return r.seed(t),e.exports},e.exports.worker=function(t){return o=t,e.exports},e.exports.characters=function(e){return void 0!==e&&r.characters(e),r.shuffled()},e.exports.isValid=s},6046:function(e,t,n){"use strict";var r=n(8857);e.exports=function(e){return!(!e||"string"!==typeof e||e.length<6)&&!new RegExp("[^"+r.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}},9139:function(e){"use strict";var t,n="object"===typeof window&&(window.crypto||window.msCrypto);t=n&&n.getRandomValues?function(e){return n.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},5408:function(e){"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},5347:function(e){"use strict";e.exports=0},2483:function(e){e.exports=function(e,t,n){for(var r=(2<<Math.log(t.length-1)/Math.LN2)-1,a=-~(1.6*r*n/t.length),s="";;)for(var o=e(a),c=a;c--;)if((s+=t[o[c]&r]||"").length===+n)return s}},4317:function(e,t,n){"use strict";n.d(t,{X:function(){return s}});var r=n(1768),a=n(1134),s=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),function(s,o,c){try{return Promise.resolve(function(a,i){try{var u=(t.context,Promise.resolve(e["sync"===n.mode?"validateSync":"validate"](s,Object.assign({abortEarly:!1},t,{context:o}))).then((function(e){return c.shouldUseNativeValidation&&(0,r.M)({},c),{values:n.rawValues?s:e,errors:{}}})))}catch(l){return i(l)}return u&&u.then?u.then(void 0,i):u}(0,(function(e){if(!e.inner)throw e;return{values:{},errors:(0,r.D)((t=e,n=!c.shouldUseNativeValidation&&"all"===c.criteriaMode,(t.inner||[]).reduce((function(e,t){if(e[t.path]||(e[t.path]={message:t.message,type:t.type}),n){var r=e[t.path].types,s=r&&r[t.type];e[t.path]=(0,a.KN)(t.path,n,e,t.type,s?[].concat(s,t.message):t.message)}return e}),{})),c)};var t,n})))}catch(i){return Promise.reject(i)}}}}}]);
//# sourceMappingURL=346.d1a53b1b.chunk.js.map