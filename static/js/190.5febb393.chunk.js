"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[190],{5190:function(e,n,t){t.r(n),t.d(n,{default:function(){return F}});var a="ContactsView_contactscVies__pEVSb",r="ContactsView_item__Aff2J",s="ContactsView_contactsTitle__+M+J9",c=t(1413),i=t(885),o=t(2791),l=t(1134),u=t(6429),m=t.n(u),d=t(4317),h=t(4386),f=t(9782),x=t(5264),j={nameRegex:/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,phoneRegExp:/^((\\+[1-9]{1,4}[ \\-]*)|[(\+\(\))]|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/},p=t(3027),g=t(3360),N="ContactForm_contactForm__FkOKX",b=t(184),_=function(){var e=(0,o.useState)(!0),n=(0,i.Z)(e,2),t=n[0],a=n[1],r=(0,f.wY)(),s=r.data,u=r.refetch,_=(0,f.Lr)(),v=(0,i.Z)(_,2),Z=v[0],C=v[1],y=C.isLoading,w=C.isSuccess,L=(0,o.useState)({name:"",number:""}),E=(0,i.Z)(L,2),I=E[0],T=(E[1],h.Ry().shape({name:h.Z_().required("Name is required").min(6,"Name must be at least 6 characters").max(20,"Name must not exceed 20 characters").matches(j.nameRegex,"Name is not valid its should contain only alphabet letters"),number:h.Z_().matches(j.phoneRegExp,"Phone number is not valid its should contain only numbers")})),k=(0,l.cI)({mode:"onTouched",reValidateMode:"onChange",defaultValues:I,resolver:(0,d.X)(T)}),S=k.register,A=k.resetField,F=k.handleSubmit,R=k.formState.errors;return(0,b.jsx)("div",{className:N,children:(0,b.jsxs)(p.Z,{onSubmit:F((function(e,n){n.preventDefault();var t=e.name,a=e.number;n.preventDefault();var r={id:m().generate(),name:t,number:a};w&&x.Notify.success("Contact ".concat(e.name," added successfully")),Z(r),u(),A("name"),A("number")}),(function(e){console.log("ERROR:::",e)})),children:[(0,b.jsxs)(p.Z.Group,{className:"mb-3",controlId:"formBasicTextName",onChange:function(e){!function(e){var n=e.currentTarget.childNodes[1].value;if(s.find((function(e){return e.name.toLowerCase()===n.toLowerCase().replace(/ +/g," ").trim()})))return a(!0),x.Notify.warning("".concat(n," is already in contacts."));a(!1)}(e)},children:[(0,b.jsx)(p.Z.Label,{children:"Contact name"}),(0,b.jsx)(p.Z.Control,(0,c.Z)({type:"text",placeholder:"Enter contact name"},S("name"))),R.name&&(0,b.jsx)(p.Z.Text,{className:"text-danger",children:R.name.message})]}),(0,b.jsxs)(p.Z.Group,{className:"mb-3",controlId:"formBasicPhoneNumber",children:[(0,b.jsx)(p.Z.Label,{children:"Phone number"}),(0,b.jsx)(p.Z.Control,(0,c.Z)({type:"text",placeholder:"Enter contact phohe number"},S("number"))),R.number&&(0,b.jsx)(p.Z.Text,{className:"text-danger",children:R.number.message})]}),(0,b.jsx)(g.Z,{variant:"primary",type:"submit",disabled:t,children:y?(0,b.jsx)(b.Fragment,{children:"Adding..."}):(0,b.jsx)(b.Fragment,{children:"Add contact"})})]})})},v="Container_container__8322i",Z=t(1694),C=t.n(Z),y=function(e){var n=e.className,t=e.children,a=C()(v,n);return(0,b.jsx)("div",{className:a,children:t})},w={listItem:"ContactsList_listItem__Elj+5",info:"ContactsList_info__hjGaA"},L=t(5048),E=t(1398),I=t(1538),T=function(){var e=(0,f.wY)(),n=e.data,t=e.isLoading,a=e.refetch,r=(0,f.Nt)(),s=(0,i.Z)(r,2),c=s[0],l=s[1].isLoading,u=(0,L.v9)(I.zK).filter;(0,o.useEffect)((function(){a()}),[a]);(0,o.useEffect)((function(){}),[a]);var m=""===u?n:n.filter((function(e){return e.name.toLowerCase().includes(u.toLowerCase())})),d=(0,b.jsx)(E.Z,{className:w.contactsList,children:n&&m.map((function(e){var n=e.name,t=e.id,r=e.number;return(0,b.jsxs)(E.Z.Item,{className:w.listItem,id:t,children:[(0,b.jsxs)("div",{className:w.info,children:[(0,b.jsxs)("span",{className:w.contactName,children:[n,": "]}),(0,b.jsx)("span",{className:w.phoneNumber,children:r})]}),(0,b.jsx)(g.Z,{variant:"primary",type:"button",onClick:function(e){return function(e){c(e.currentTarget.parentNode.id),l||(e.currentTarget.innerHTML="Deleting ..."),a()}(e)},children:"Delete contact"})]},t)}))});return t?(0,b.jsx)("div",{children:"loading..."}):0!==n.length?d:"You have no contacts"},k=function(){var e=(0,L.I0)();return(0,b.jsx)(p.Z,{children:(0,b.jsx)(p.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:(0,b.jsx)(p.Z.Control,{type:"text",placeholder:"Search...",onChange:function(n){return e((0,I.Tv)(n.currentTarget.value))}})})})},S=t(4867),A=t(9529),F=function(){var e=(0,L.I0)();return(0,o.useEffect)((function(){e(S.r5.fetchCurrentUser()).unwrap().catch((function(){x.Notify.warning("Sorry, your authorization token expired, please relogin",{}),e(S.r5.logOut())}))}),[e]),(0,L.v9)(S.um.getIsFetchingCurrentUser)?(0,b.jsx)(A.Z,{}):(0,b.jsx)(y,{children:(0,b.jsxs)("ul",{className:a,children:[(0,b.jsxs)("li",{className:r,children:[(0,b.jsx)("h4",{className:s,children:"Add contacts info"}),(0,b.jsx)(_,{}),(0,b.jsx)("h4",{className:s,children:"Find contacts"}),(0,b.jsx)(k,{})]}),(0,b.jsxs)("li",{className:r,children:[(0,b.jsx)("h4",{className:s,children:"List of Contacts"}),(0,b.jsx)(T,{})]})]})})}}}]);
//# sourceMappingURL=190.5febb393.chunk.js.map